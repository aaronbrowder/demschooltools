@(sm_charges : List [ Charge ])(implicit request: play.mvc.Http.Request, messages: play.i18n.Messages)

@import helper._

@main("Charges referred to School Meeting", "jc", "view_referred") {

<h2>Charges referred to School Meeting</h2>
@if( sm_charges.size() > 0 ) {
	<table class="table">
		<thead><th width="100">Case
			<th width="20">Person
			<th width="150">Entry
			<th width="70">Plea
			<th>@Utils.getOrgConfig(request).str_res_plan_cap<th>@Utils.getOrgConfig(request).str_findings</thead>
	@for( c <- sm_charges ) {
		<tr><td>@c.getTheCase().getCaseNumber()
			<td>@if(c.getPerson() != null) { @c.getPerson().getDisplayName() } else { <i>No one</i> }
			<td>@c.getRuleTitle()
			<td>@Utils.getOrgConfig(request).translatePlea(c.getPlea())
			<td>@c.getResolutionPlan()
			<td>@Utils.newlineToBr(Application.generateCompositeFindingsFromChargeReferences(c.getTheCase()))
	}
	</table>

	<a class="btn btn-primary" href="@routes.ApplicationEditing.enterSchoolMeetingDecisions()">
	Record School Meeting decisions</a>
} else {
	<p>No charges awaiting a decision from School Meeting.
}

}
